<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teste Sistema Cadastro M√©dico - TeleMed</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 min-h-screen py-8">
    <div class="max-w-6xl mx-auto px-4">
        <h1 class="text-3xl font-bold text-center mb-8">üß™ Teste Sistema de Cadastro e Aprova√ß√£o de M√©dicos</h1>
        <p class="text-center text-gray-600 mb-8">Tarefa 2 - Testes completos do sistema de candidaturas m√©dicas</p>
        
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
            <!-- Controles de Teste -->
            <div class="bg-white rounded-lg shadow-lg p-6">
                <h2 class="text-xl font-semibold mb-4">üéØ Su√≠tes de Teste</h2>
                
                <div class="space-y-3">
                    <button id="runValidationTests" class="w-full bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 px-4 rounded">
                        üìù Testar Valida√ß√µes de Formul√°rio
                    </button>
                    
                    <button id="runDatabaseTests" class="w-full bg-green-500 hover:bg-green-600 text-white font-bold py-3 px-4 rounded">
                        üóÑÔ∏è Testar Integra√ß√£o com Banco
                    </button>
                    
                    <button id="runNotificationTests" class="w-full bg-purple-500 hover:bg-purple-600 text-white font-bold py-3 px-4 rounded">
                        üìß Testar Sistema de Notifica√ß√µes
                    </button>
                    
                    <button id="runAdminTests" class="w-full bg-orange-500 hover:bg-orange-600 text-white font-bold py-3 px-4 rounded">
                        üë®‚Äçüíº Testar Painel Administrativo
                    </button>
                    
                    <button id="runWorkflowTests" class="w-full bg-red-500 hover:bg-red-600 text-white font-bold py-3 px-4 rounded">
                        ‚öôÔ∏è Testar Workflow de Aprova√ß√£o
                    </button>
                    
                    <button id="runAllTests" class="w-full bg-gray-800 hover:bg-gray-900 text-white font-bold py-4 px-4 rounded">
                        üöÄ Executar Todos os Testes
                    </button>
                </div>
                
                <!-- Status dos Testes -->
                <div class="mt-6 p-4 bg-gray-50 rounded">
                    <h3 class="font-medium text-sm mb-3">üìä Status dos Testes</h3>
                    <div id="testProgress" class="space-y-2">
                        <div class="text-xs text-gray-600">Nenhum teste executado ainda</div>
                    </div>
                </div>
                
                <!-- Dados de Teste -->
                <div class="mt-6 p-4 bg-blue-50 rounded">
                    <h3 class="font-medium text-sm mb-3">üß™ Dados de Teste</h3>
                    <button id="generateTestData" class="w-full bg-blue-400 hover:bg-blue-500 text-white py-2 px-3 rounded text-sm">
                        Gerar Dados de Teste
                    </button>
                    <div id="testDataInfo" class="mt-2 text-xs text-gray-600">
                        Clique para gerar dados de teste aleat√≥rios
                    </div>
                </div>
            </div>
            
            <!-- Resultados dos Testes -->
            <div class="bg-white rounded-lg shadow-lg p-6">
                <h2 class="text-xl font-semibold mb-4">üìã Resultados dos Testes</h2>
                
                <div id="testResults" class="bg-gray-50 rounded p-4 h-96 overflow-y-auto text-sm">
                    <div class="text-gray-500 text-center py-8">
                        Clique em um dos bot√µes ao lado para executar os testes
                    </div>
                </div>
                
                <div class="mt-4 flex gap-2">
                    <button id="clearResults" class="bg-gray-500 hover:bg-gray-600 text-white px-3 py-1 rounded text-xs">
                        Limpar Resultados
                    </button>
                    <button id="exportResults" class="bg-blue-500 hover:bg-blue-600 text-white px-3 py-1 rounded text-xs">
                        Exportar Relat√≥rio
                    </button>
                </div>
            </div>
        </div>
        
        <!-- Console de Debug -->
        <div class="bg-gray-900 rounded-lg shadow-lg p-6 mt-6">
            <h2 class="text-xl font-semibold mb-4 text-white">üíª Console de Debug</h2>
            <div id="debugConsole" class="bg-black rounded p-4 h-64 overflow-y-auto font-mono text-sm text-green-400"></div>
            <button id="clearConsole" class="mt-2 bg-gray-700 hover:bg-gray-600 text-white px-3 py-1 rounded text-sm">
                Limpar Console
            </button>
        </div>
        
        <!-- Teste Manual de Candidatura -->
        <div class="bg-white rounded-lg shadow-lg p-6 mt-6">
            <h2 class="text-xl font-semibold mb-4">üßë‚Äç‚öïÔ∏è Teste Manual de Candidatura</h2>
            
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                <!-- Formul√°rio de Teste -->
                <div>
                    <h3 class="font-medium mb-3">Dados do M√©dico</h3>
                    <form id="testApplicationForm" class="space-y-3">
                        <input type="text" id="testFullName" placeholder="Nome completo" class="w-full px-3 py-2 border rounded text-sm">
                        <input type="text" id="testCpf" placeholder="CPF (123.456.789-00)" class="w-full px-3 py-2 border rounded text-sm">
                        <input type="email" id="testEmail" placeholder="Email profissional" class="w-full px-3 py-2 border rounded text-sm">
                        <input type="text" id="testCrm" placeholder="N√∫mero do CRM" class="w-full px-3 py-2 border rounded text-sm">
                        <select id="testCrmState" class="w-full px-3 py-2 border rounded text-sm">
                            <option value="">Estado do CRM</option>
                            <option value="SP">S√£o Paulo</option>
                            <option value="RJ">Rio de Janeiro</option>
                            <option value="MG">Minas Gerais</option>
                        </select>
                        <input type="text" id="testMedicalSchool" placeholder="Faculdade de Medicina" class="w-full px-3 py-2 border rounded text-sm">
                        <input type="number" id="testGraduationYear" placeholder="Ano de forma√ß√£o" min="1950" max="2024" class="w-full px-3 py-2 border rounded text-sm">
                        <input type="number" id="testPrice" placeholder="Pre√ßo consulta (R$)" min="50" max="500" class="w-full px-3 py-2 border rounded text-sm">
                        
                        <div class="space-y-2">
                            <label class="text-sm font-medium">Especialidades:</label>
                            <div class="grid grid-cols-2 gap-2 text-xs">
                                <label><input type="checkbox" name="testSpecialties" value="clinica-geral" class="mr-1"> Cl√≠nica Geral</label>
                                <label><input type="checkbox" name="testSpecialties" value="cardiologia" class="mr-1"> Cardiologia</label>
                                <label><input type="checkbox" name="testSpecialties" value="dermatologia" class="mr-1"> Dermatologia</label>
                                <label><input type="checkbox" name="testSpecialties" value="pediatria" class="mr-1"> Pediatria</label>
                            </div>
                        </div>
                        
                        <button type="submit" class="w-full bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 rounded">
                            Testar Candidatura
                        </button>
                        <button type="button" id="fillTestData" class="w-full bg-gray-400 hover:bg-gray-500 text-white py-1 px-2 rounded text-sm">
                            Preencher com Dados de Teste
                        </button>
                    </form>
                </div>
                
                <!-- Resultado do Teste Manual -->
                <div>
                    <h3 class="font-medium mb-3">Resultado do Teste</h3>
                    <div id="manualTestResult" class="bg-gray-50 rounded p-4 h-80 overflow-y-auto text-sm">
                        <div class="text-gray-500 text-center py-8">
                            Preencha o formul√°rio e clique em "Testar Candidatura"
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="js/supabase.js"></script>
    <script>
        // =====================================================
        // SISTEMA DE LOGGING E RESULTADOS
        // =====================================================
        
        let testResults = [];
        let testData = null;
        
        function log(message, type = 'info') {
            const console = document.getElementById('debugConsole');
            const timestamp = new Date().toLocaleTimeString();
            const colors = {
                info: 'text-green-400',
                error: 'text-red-400',
                warning: 'text-yellow-400',
                success: 'text-blue-400'
            };
            
            const logEntry = document.createElement('div');
            logEntry.className = colors[type] || 'text-green-400';
            logEntry.innerHTML = `[${timestamp}] ${message}`;
            console.appendChild(logEntry);
            console.scrollTop = console.scrollHeight;
        }
        
        function addTestResult(testName, passed, details = '', category = '') {
            const container = document.getElementById('testResults');
            const timestamp = new Date().toLocaleTimeString();
            
            const result = {
                timestamp,
                category,
                testName,
                passed,
                details
            };
            
            testResults.push(result);
            
            const div = document.createElement('div');
            div.className = `p-3 mb-2 rounded border-l-4 ${passed ? 'border-green-500 bg-green-50' : 'border-red-500 bg-red-50'}`;
            
            const icon = passed ? '‚úÖ' : '‚ùå';
            const statusText = passed ? 'PASSOU' : 'FALHOU';
            
            div.innerHTML = `
                <div class="flex items-center justify-between">
                    <span class="font-medium text-sm">${icon} ${testName}</span>
                    <span class="text-xs text-gray-500">${timestamp}</span>
                </div>
                ${details ? `<div class="text-xs text-gray-600 mt-1">${details}</div>` : ''}
            `;
            
            container.appendChild(div);
            container.scrollTop = container.scrollHeight;
            
            updateTestProgress(category, testName, passed);
            log(`[${category}] ${testName}: ${statusText}${details ? ' - ' + details : ''}`, passed ? 'success' : 'error');
        }
        
        function updateTestProgress(category, testName, passed) {
            const container = document.getElementById('testProgress');
            
            let categoryDiv = container.querySelector(`[data-category="${category}"]`);
            if (!categoryDiv) {
                categoryDiv = document.createElement('div');
                categoryDiv.setAttribute('data-category', category);
                categoryDiv.className = 'text-xs flex justify-between';
                categoryDiv.innerHTML = `<span class="font-medium">${category}:</span> <span class="status">0/0</span>`;
                container.appendChild(categoryDiv);
            }
            
            const categoryTests = testResults.filter(r => r.category === category);
            const passedTests = categoryTests.filter(r => r.passed).length;
            const totalTests = categoryTests.length;
            
            const statusSpan = categoryDiv.querySelector('.status');
            const color = passedTests === totalTests && totalTests > 0 ? 'text-green-600' : 'text-blue-600';
            statusSpan.className = `status ${color}`;
            statusSpan.textContent = `${passedTests}/${totalTests}`;
        }
        
        function addManualResult(message, type = 'info') {
            const container = document.getElementById('manualTestResult');
            const div = document.createElement('div');
            
            const colors = {
                success: 'bg-green-100 text-green-800 border-green-200',
                error: 'bg-red-100 text-red-800 border-red-200',
                info: 'bg-blue-100 text-blue-800 border-blue-200',
                warning: 'bg-yellow-100 text-yellow-800 border-yellow-200'
            };
            
            div.className = `p-2 rounded border text-sm mb-2 ${colors[type]}`;
            div.innerHTML = `${type === 'success' ? '‚úÖ' : type === 'error' ? '‚ùå' : type === 'warning' ? '‚ö†Ô∏è' : '‚ÑπÔ∏è'} ${message}`;
            container.appendChild(div);
            container.scrollTop = container.scrollHeight;
        }
        
        // =====================================================
        // FUN√á√ïES DE VALIDA√á√ÉO (SIMULADAS)
        // =====================================================
        
        function validateCPF(cpf) {
            if (!cpf) return false;
            const cleanCPF = cpf.replace(/\D/g, '');
            if (cleanCPF.length !== 11 || cleanCPF === '00000000000') return false;
            
            // Valida√ß√£o b√°sica de d√≠gitos verificadores
            let sum = 0;
            for (let i = 0; i < 9; i++) {
                sum += parseInt(cleanCPF.charAt(i)) * (10 - i);
            }
            let digit1 = 11 - (sum % 11);
            if (digit1 > 9) digit1 = 0;
            
            sum = 0;
            for (let i = 0; i < 10; i++) {
                sum += parseInt(cleanCPF.charAt(i)) * (11 - i);
            }
            let digit2 = 11 - (sum % 11);
            if (digit2 > 9) digit2 = 0;
            
            return parseInt(cleanCPF.charAt(9)) === digit1 && parseInt(cleanCPF.charAt(10)) === digit2;
        }
        
        function validateEmail(email) {
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            return emailRegex.test(email);
        }
        
        function validateCRM(crm) {
            return crm && crm.length >= 4 && crm.length <= 7 && /^\d+$/.test(crm);
        }
        
        function validateCRMState(state) {
            const validStates = ['SP', 'RJ', 'MG', 'RS', 'PR', 'SC', 'BA', 'GO', 'DF', 'ES', 'MT', 'MS', 'TO', 'RO', 'AC', 'AM', 'RR', 'PA', 'AP', 'MA', 'PI', 'CE', 'RN', 'PB', 'PE', 'AL', 'SE'];
            return validStates.includes(state);
        }
        
        function validateGraduationYear(year) {
            const currentYear = new Date().getFullYear();
            return year >= 1950 && year <= currentYear;
        }
        
        function validateSpecialties(specialties) {
            return Array.isArray(specialties) && specialties.length > 0;
        }
        
        function validatePrice(price) {
            return typeof price === 'number' && price >= 50 && price <= 1000;
        }
        
        // =====================================================
        // TESTES DE VALIDA√á√ÉO
        // =====================================================
        
        async function runValidationTests() {
            log('Iniciando testes de valida√ß√£o...', 'info');
            addTestResult('Iniciando testes de valida√ß√£o', true, 'Testando todas as fun√ß√µes de valida√ß√£o', 'VALIDA√á√ÉO');
            
            // Teste 1: Valida√ß√£o de CPF
            const cpfTests = [
                { cpf: '123.456.789-00', expected: true, desc: 'CPF v√°lido formatado' },
                { cpf: '12345678900', expected: true, desc: 'CPF v√°lido sem formata√ß√£o' },
                { cpf: '000.000.000-00', expected: false, desc: 'CPF inv√°lido (zeros)' },
                { cpf: '123.456.789-99', expected: false, desc: 'CPF inv√°lido (d√≠gitos)' },
                { cpf: '', expected: false, desc: 'CPF vazio' },
                { cpf: null, expected: false, desc: 'CPF null' }
            ];
            
            for (const test of cpfTests) {
                const result = validateCPF(test.cpf);
                const passed = result === test.expected;
                addTestResult(`CPF: ${test.desc}`, passed, `Entrada: "${test.cpf}" | Esperado: ${test.expected} | Obtido: ${result}`, 'VALIDA√á√ÉO');
            }
            
            // Teste 2: Valida√ß√£o de Email
            const emailTests = [
                { email: 'medico@hospital.com', expected: true, desc: 'Email v√°lido simples' },
                { email: 'dr.joao@clinica.med.br', expected: true, desc: 'Email v√°lido com pontos' },
                { email: 'invalid-email', expected: false, desc: 'Email inv√°lido sem @' },
                { email: '@hospital.com', expected: false, desc: 'Email inv√°lido sem usu√°rio' },
                { email: 'medico@', expected: false, desc: 'Email inv√°lido sem dom√≠nio' },
                { email: '', expected: false, desc: 'Email vazio' }
            ];
            
            for (const test of emailTests) {
                const result = validateEmail(test.email);
                const passed = result === test.expected;
                addTestResult(`Email: ${test.desc}`, passed, `Entrada: "${test.email}" | Esperado: ${test.expected} | Obtido: ${result}`, 'VALIDA√á√ÉO');
            }
            
            // Teste 3: Valida√ß√£o de CRM
            const crmTests = [
                { crm: '123456', expected: true, desc: 'CRM v√°lido 6 d√≠gitos' },
                { crm: '12345', expected: true, desc: 'CRM v√°lido 5 d√≠gitos' },
                { crm: '1234', expected: true, desc: 'CRM v√°lido 4 d√≠gitos' },
                { crm: '123', expected: false, desc: 'CRM inv√°lido muito curto' },
                { crm: '12345678', expected: false, desc: 'CRM inv√°lido muito longo' },
                { crm: 'abc123', expected: false, desc: 'CRM inv√°lido com letras' },
                { crm: '', expected: false, desc: 'CRM vazio' }
            ];
            
            for (const test of crmTests) {
                const result = validateCRM(test.crm);
                const passed = result === test.expected;
                addTestResult(`CRM: ${test.desc}`, passed, `Entrada: "${test.crm}" | Esperado: ${test.expected} | Obtido: ${result}`, 'VALIDA√á√ÉO');
            }
            
            // Teste 4: Valida√ß√£o de Estado
            const stateTests = [
                { state: 'SP', expected: true, desc: 'Estado v√°lido SP' },
                { state: 'RJ', expected: true, desc: 'Estado v√°lido RJ' },
                { state: 'XX', expected: false, desc: 'Estado inv√°lido XX' },
                { state: 'SPP', expected: false, desc: 'Estado inv√°lido muito longo' },
                { state: '', expected: false, desc: 'Estado vazio' }
            ];
            
            for (const test of stateTests) {
                const result = validateCRMState(test.state);
                const passed = result === test.expected;
                addTestResult(`Estado: ${test.desc}`, passed, `Entrada: "${test.state}" | Esperado: ${test.expected} | Obtido: ${result}`, 'VALIDA√á√ÉO');
            }
            
            // Teste 5: Valida√ß√£o de Ano
            const currentYear = new Date().getFullYear();
            const yearTests = [
                { year: 2020, expected: true, desc: 'Ano v√°lido recente' },
                { year: 1990, expected: true, desc: 'Ano v√°lido antigo' },
                { year: currentYear, expected: true, desc: 'Ano atual' },
                { year: 1949, expected: false, desc: 'Ano muito antigo' },
                { year: currentYear + 1, expected: false, desc: 'Ano futuro' }
            ];
            
            for (const test of yearTests) {
                const result = validateGraduationYear(test.year);
                const passed = result === test.expected;
                addTestResult(`Ano: ${test.desc}`, passed, `Entrada: ${test.year} | Esperado: ${test.expected} | Obtido: ${result}`, 'VALIDA√á√ÉO');
            }
            
            // Teste 6: Valida√ß√£o de Especialidades
            const specialtyTests = [
                { specialties: ['clinica-geral'], expected: true, desc: 'Uma especialidade' },
                { specialties: ['cardiologia', 'clinica-geral'], expected: true, desc: 'M√∫ltiplas especialidades' },
                { specialties: [], expected: false, desc: 'Nenhuma especialidade' },
                { specialties: null, expected: false, desc: 'Especialidades null' }
            ];
            
            for (const test of specialtyTests) {
                const result = validateSpecialties(test.specialties);
                const passed = result === test.expected;
                addTestResult(`Especialidades: ${test.desc}`, passed, `Entrada: ${JSON.stringify(test.specialties)} | Esperado: ${test.expected} | Obtido: ${result}`, 'VALIDA√á√ÉO');
            }
            
            // Teste 7: Valida√ß√£o de Pre√ßo
            const priceTests = [
                { price: 150, expected: true, desc: 'Pre√ßo v√°lido m√©dio' },
                { price: 50, expected: true, desc: 'Pre√ßo m√≠nimo' },
                { price: 1000, expected: true, desc: 'Pre√ßo m√°ximo' },
                { price: 49, expected: false, desc: 'Pre√ßo muito baixo' },
                { price: 1001, expected: false, desc: 'Pre√ßo muito alto' },
                { price: 0, expected: false, desc: 'Pre√ßo zero' },
                { price: -10, expected: false, desc: 'Pre√ßo negativo' }
            ];
            
            for (const test of priceTests) {
                const result = validatePrice(test.price);
                const passed = result === test.expected;
                addTestResult(`Pre√ßo: ${test.desc}`, passed, `Entrada: ${test.price} | Esperado: ${test.expected} | Obtido: ${result}`, 'VALIDA√á√ÉO');
            }
            
            log('Testes de valida√ß√£o conclu√≠dos!', 'success');
        }
        
        // =====================================================
        // TESTES DE BANCO DE DADOS
        // =====================================================
        
        async function runDatabaseTests() {
            log('Iniciando testes de banco de dados...', 'info');
            addTestResult('Iniciando testes de banco', true, 'Testando integra√ß√£o com Supabase', 'BANCO');
            
            // Teste 1: Verificar conex√£o com Supabase
            try {
                if (supabase) {
                    addTestResult('Conex√£o Supabase', true, 'Cliente Supabase inicializado', 'BANCO');
                } else {
                    addTestResult('Conex√£o Supabase', false, 'Cliente Supabase n√£o encontrado', 'BANCO');
                    return;
                }
            } catch (e) {
                addTestResult('Conex√£o Supabase', false, `Erro: ${e.message}`, 'BANCO');
                return;
            }
            
            // Teste 2: Verificar tabela doctors_applications
            try {
                const { data, error } = await supabase
                    .from('doctors_applications')
                    .select('*', { count: 'exact', head: true });
                
                if (error) {
                    addTestResult('Tabela doctors_applications', false, `Erro: ${error.message}`, 'BANCO');
                } else {
                    addTestResult('Tabela doctors_applications', true, 'Tabela acess√≠vel', 'BANCO');
                }
            } catch (e) {
                addTestResult('Tabela doctors_applications', false, `Erro de conex√£o: ${e.message}`, 'BANCO');
            }
            
            // Teste 3: Testar inser√ß√£o de candidatura (se poss√≠vel)
            if (testData) {
                try {
                    const applicationData = {
                        // Dados Pessoais Obrigat√≥rios
                        full_name: testData.fullName,
                        cpf: testData.cpf,
                        rg: generateValidRG(), // Campo obrigat√≥rio que estava faltando
                        birth_date: '1990-01-01', // Campo obrigat√≥rio
                        email: testData.email,
                        phone: testData.phone || '(11) 99999-9999',
                        address: testData.address || 'Rua Teste, 123, S√£o Paulo - SP',
                        gender: 'masculino',
                        
                        // Registro Profissional
                        crm: testData.crm,
                        crm_state: testData.crmState,
                        crm_status: 'ativo',
                        
                        // Forma√ß√£o Acad√™mica
                        medical_school: testData.medicalSchool,
                        graduation_year: parseInt(testData.graduationYear),
                        diploma_recognized: 'sim',
                        
                        // Especialidades
                        specialties: testData.specialties || ['clinica-geral'],
                        
                        // Experi√™ncia
                        experience_years: '3-5',
                        
                        // Dados Financeiros
                        bank: '001',
                        agency: '1234',
                        account: '12345-6',
                        pix_key: testData.email,
                        tax_status: 'pessoa-fisica',
                        
                        // Precifica√ß√£o
                        normal_consultation_price: parseFloat(testData.price) || 150,
                        
                        // Aspectos Legais (todos obrigat√≥rios)
                        cfm_resolution_accepted: true,
                        medical_ethics_accepted: true,
                        civil_responsibility_accepted: true,
                        service_contract_accepted: true,
                        privacy_policy_accepted: true,
                        platform_terms_accepted: true,
                        data_processing_authorized: true
                    };
                    
                    const { data: insertData, error: insertError } = await supabase
                        .from('doctors_applications')
                        .insert(applicationData)
                        .select();
                    
                    if (insertError) {
                        if (insertError.code === '23505') {
                            addTestResult('Inser√ß√£o candidatura', false, 'CPF ou email j√° cadastrado (esperado)', 'BANCO');
                        } else {
                            addTestResult('Inser√ß√£o candidatura', false, `Erro: ${insertError.message}`, 'BANCO');
                        }
                    } else {
                        addTestResult('Inser√ß√£o candidatura', true, `Candidatura inserida com ID: ${insertData[0]?.id}`, 'BANCO');
                        
                        // Teste 4: Testar busca da candidatura inserida
                        try {
                            const { data: selectData, error: selectError } = await supabase
                                .from('doctors_applications')
                                .select('*')
                                .eq('id', insertData[0].id)
                                .single();
                            
                            if (selectError) {
                                addTestResult('Busca candidatura', false, `Erro: ${selectError.message}`, 'BANCO');
                            } else {
                                addTestResult('Busca candidatura', true, `Candidatura encontrada: ${selectData.full_name}`, 'BANCO');
                            }
                        } catch (e) {
                            addTestResult('Busca candidatura', false, `Erro: ${e.message}`, 'BANCO');
                        }
                        
                        // Teste 5: Testar atualiza√ß√£o de status
                        try {
                            const { data: updateData, error: updateError } = await supabase
                                .from('doctors_applications')
                                .update({ application_status: 'under_review' })
                                .eq('id', insertData[0].id)
                                .select();
                            
                            if (updateError) {
                                addTestResult('Atualiza√ß√£o status', false, `Erro: ${updateError.message}`, 'BANCO');
                            } else {
                                addTestResult('Atualiza√ß√£o status', true, `Status atualizado para: ${updateData[0]?.application_status}`, 'BANCO');
                            }
                        } catch (e) {
                            addTestResult('Atualiza√ß√£o status', false, `Erro: ${e.message}`, 'BANCO');
                        }
                    }
                } catch (e) {
                    addTestResult('Inser√ß√£o candidatura', false, `Erro geral: ${e.message}`, 'BANCO');
                }
            } else {
                addTestResult('Inser√ß√£o candidatura', false, 'Dados de teste n√£o gerados', 'BANCO');
            }
            
            log('Testes de banco de dados conclu√≠dos!', 'success');
        }
        
        // =====================================================
        // TESTES DE NOTIFICA√á√ïES
        // =====================================================
        
        async function runNotificationTests() {
            log('Iniciando testes de notifica√ß√µes...', 'info');
            addTestResult('Iniciando testes de notifica√ß√µes', true, 'Testando sistema de emails', 'NOTIFICA√á√ïES');
            
            // Teste 1: Verificar classe DoctorNotificationSystem
            try {
                // Simular a classe (j√° que n√£o temos o arquivo carregado)
                class DoctorNotificationSystem {
                    constructor() {
                        this.emailTemplates = {
                            applicationReceived: { subject: 'Candidatura Recebida' },
                            applicationApproved: { subject: 'Candidatura Aprovada' },
                            applicationRejected: { subject: 'Candidatura Rejeitada' }
                        };
                    }
                    
                    async sendApplicationReceived(data) {
                        return { success: true, message: 'Email simulado enviado' };
                    }
                    
                    async sendApplicationApproved(data) {
                        return { success: true, message: 'Email simulado enviado' };
                    }
                    
                    async sendApplicationRejected(data, reason) {
                        return { success: true, message: 'Email simulado enviado' };
                    }
                    
                    replaceTemplateVariables(template, variables) {
                        let content = template;
                        for (const [key, value] of Object.entries(variables)) {
                            const regex = new RegExp(`{{${key}}}`, 'g');
                            content = content.replace(regex, value);
                        }
                        return content;
                    }
                }
                
                const notifications = new DoctorNotificationSystem();
                addTestResult('Classe NotificationSystem', true, 'Classe instanciada com sucesso', 'NOTIFICA√á√ïES');
                
                // Teste 2: Testar templates de email
                const templates = Object.keys(notifications.emailTemplates);
                const expectedTemplates = ['applicationReceived', 'applicationApproved', 'applicationRejected'];
                
                for (const template of expectedTemplates) {
                    const exists = templates.includes(template);
                    addTestResult(`Template ${template}`, exists, exists ? 'Template encontrado' : 'Template n√£o encontrado', 'NOTIFICA√á√ïES');
                }
                
                // Teste 3: Testar substitui√ß√£o de vari√°veis
                const template = 'Ol√°, {{doctorName}}! Seu CRM √© {{crm}}.';
                const variables = { doctorName: 'Dr. Jo√£o', crm: '123456' };
                const result = notifications.replaceTemplateVariables(template, variables);
                const expected = 'Ol√°, Dr. Jo√£o! Seu CRM √© 123456.';
                
                addTestResult('Substitui√ß√£o vari√°veis', result === expected, `Resultado: "${result}"`, 'NOTIFICA√á√ïES');
                
                // Teste 4: Testar envio de notifica√ß√µes (simulado)
                if (testData) {
                    const mockData = {
                        full_name: testData.fullName,
                        email: testData.email,
                        crm: testData.crm,
                        crm_state: testData.crmState,
                        specialties: testData.specialties,
                        submitted_at: new Date().toISOString(),
                        id: 'test-id-123'
                    };
                    
                    // Testar notifica√ß√£o de candidatura recebida
                    const receivedResult = await notifications.sendApplicationReceived(mockData);
                    addTestResult('Notifica√ß√£o recebida', receivedResult.success, receivedResult.message, 'NOTIFICA√á√ïES');
                    
                    // Testar notifica√ß√£o de aprova√ß√£o
                    const approvedResult = await notifications.sendApplicationApproved(mockData);
                    addTestResult('Notifica√ß√£o aprova√ß√£o', approvedResult.success, approvedResult.message, 'NOTIFICA√á√ïES');
                    
                    // Testar notifica√ß√£o de rejei√ß√£o
                    const rejectedResult = await notifications.sendApplicationRejected(mockData, 'Documentos incompletos');
                    addTestResult('Notifica√ß√£o rejei√ß√£o', rejectedResult.success, rejectedResult.message, 'NOTIFICA√á√ïES');
                } else {
                    addTestResult('Envio notifica√ß√µes', false, 'Dados de teste n√£o dispon√≠veis', 'NOTIFICA√á√ïES');
                }
                
            } catch (e) {
                addTestResult('Sistema notifica√ß√µes', false, `Erro: ${e.message}`, 'NOTIFICA√á√ïES');
            }
            
            log('Testes de notifica√ß√µes conclu√≠dos!', 'success');
        }
        
        // =====================================================
        // TESTES DO PAINEL ADMINISTRATIVO
        // =====================================================
        
        async function runAdminTests() {
            log('Iniciando testes do painel administrativo...', 'info');
            addTestResult('Iniciando testes admin', true, 'Testando funcionalidades administrativas', 'ADMIN');
            
            // Teste 1: Simular dados de candidaturas
            const mockApplications = [
                { id: '1', application_status: 'pending', full_name: 'Dr. Jo√£o', crm: '123456', crm_state: 'SP' },
                { id: '2', application_status: 'approved', full_name: 'Dr. Maria', crm: '654321', crm_state: 'RJ' },
                { id: '3', application_status: 'rejected', full_name: 'Dr. Pedro', crm: '789012', crm_state: 'MG' },
                { id: '4', application_status: 'pending', full_name: 'Dr. Ana', crm: '345678', crm_state: 'RS' }
            ];
            
            // Teste 2: Filtrar candidaturas por status
            function filterApplicationsByStatus(applications, status) {
                return applications.filter(app => app.application_status === status);
            }
            
            const pendingApps = filterApplicationsByStatus(mockApplications, 'pending');
            const approvedApps = filterApplicationsByStatus(mockApplications, 'approved');
            const rejectedApps = filterApplicationsByStatus(mockApplications, 'rejected');
            
            addTestResult('Filtro pendentes', pendingApps.length === 2, `Encontradas ${pendingApps.length} candidaturas pendentes`, 'ADMIN');
            addTestResult('Filtro aprovadas', approvedApps.length === 1, `Encontradas ${approvedApps.length} candidaturas aprovadas`, 'ADMIN');
            addTestResult('Filtro rejeitadas', rejectedApps.length === 1, `Encontradas ${rejectedApps.length} candidaturas rejeitadas`, 'ADMIN');
            
            // Teste 3: Calcular estat√≠sticas
            function calculateStats(applications) {
                return {
                    pending: applications.filter(app => app.application_status === 'pending').length,
                    approved: applications.filter(app => app.application_status === 'approved').length,
                    rejected: applications.filter(app => app.application_status === 'rejected').length,
                    total: applications.length
                };
            }
            
            const stats = calculateStats(mockApplications);
            addTestResult('C√°lculo estat√≠sticas', stats.total === 4, `Total: ${stats.total}, Pendentes: ${stats.pending}, Aprovadas: ${stats.approved}, Rejeitadas: ${stats.rejected}`, 'ADMIN');
            
            // Teste 4: Formata√ß√£o de dados para exibi√ß√£o
            function formatApplicationForDisplay(application) {
                return {
                    doctorName: application.full_name,
                    crmFormatted: `${application.crm}/${application.crm_state}`,
                    statusText: application.application_status === 'pending' ? 'Pendente' : 
                               application.application_status === 'approved' ? 'Aprovado' : 'Rejeitado'
                };
            }
            
            const formatted = formatApplicationForDisplay(mockApplications[0]);
            const expectedFormat = {
                doctorName: 'Dr. Jo√£o',
                crmFormatted: '123456/SP',
                statusText: 'Pendente'
            };
            
            const formatCorrect = formatted.doctorName === expectedFormat.doctorName && 
                                 formatted.crmFormatted === expectedFormat.crmFormatted && 
                                 formatted.statusText === expectedFormat.statusText;
            
            addTestResult('Formata√ß√£o dados', formatCorrect, `Formatado: ${JSON.stringify(formatted)}`, 'ADMIN');
            
            // Teste 5: Valida√ß√£o de permiss√µes de admin
            function isAdmin(user) {
                return user && user.role === 'admin';
            }
            
            const adminUser = { role: 'admin', name: 'Admin' };
            const normalUser = { role: 'user', name: 'User' };
            
            addTestResult('Permiss√£o admin v√°lida', isAdmin(adminUser), 'Usu√°rio admin reconhecido', 'ADMIN');
            addTestResult('Permiss√£o user inv√°lida', !isAdmin(normalUser), 'Usu√°rio normal rejeitado', 'ADMIN');
            addTestResult('Permiss√£o null', !isAdmin(null), 'Usu√°rio null rejeitado', 'ADMIN');
            
            log('Testes do painel administrativo conclu√≠dos!', 'success');
        }
        
        // =====================================================
        // TESTES DE WORKFLOW DE APROVA√á√ÉO
        // =====================================================
        
        async function runWorkflowTests() {
            log('Iniciando testes de workflow...', 'info');
            addTestResult('Iniciando testes workflow', true, 'Testando processo de aprova√ß√£o/rejei√ß√£o', 'WORKFLOW');
            
            // Simular fun√ß√µes de workflow
            async function approveApplication(id) {
                try {
                    // Simular atualiza√ß√£o no banco
                    log(`Simulando aprova√ß√£o da candidatura ${id}`, 'info');
                    return { success: true, message: 'Candidatura aprovada' };
                } catch (e) {
                    return { success: false, error: e.message };
                }
            }
            
            async function rejectApplication(id, reason) {
                try {
                    // Simular atualiza√ß√£o no banco
                    log(`Simulando rejei√ß√£o da candidatura ${id} - Motivo: ${reason}`, 'info');
                    return { success: true, message: 'Candidatura rejeitada' };
                } catch (e) {
                    return { success: false, error: e.message };
                }
            }
            
            // Teste 1: Aprovar candidatura
            const approvalResult = await approveApplication('test-id-1');
            addTestResult('Aprova√ß√£o candidatura', approvalResult.success, approvalResult.message || approvalResult.error, 'WORKFLOW');
            
            // Teste 2: Rejeitar candidatura
            const rejectionResult = await rejectApplication('test-id-2', 'Documentos incompletos');
            addTestResult('Rejei√ß√£o candidatura', rejectionResult.success, rejectionResult.message || rejectionResult.error, 'WORKFLOW');
            
            // Teste 3: Validar transi√ß√µes de status
            const validTransitions = {
                'pending': ['approved', 'rejected', 'under_review'],
                'under_review': ['approved', 'rejected'],
                'approved': [],
                'rejected': []
            };
            
            function canTransition(fromStatus, toStatus) {
                return validTransitions[fromStatus]?.includes(toStatus) || false;
            }
            
            // Testar transi√ß√µes v√°lidas
            addTestResult('Transi√ß√£o pending->approved', canTransition('pending', 'approved'), 'Transi√ß√£o permitida', 'WORKFLOW');
            addTestResult('Transi√ß√£o pending->rejected', canTransition('pending', 'rejected'), 'Transi√ß√£o permitida', 'WORKFLOW');
            addTestResult('Transi√ß√£o approved->pending', !canTransition('approved', 'pending'), 'Transi√ß√£o bloqueada (correto)', 'WORKFLOW');
            addTestResult('Transi√ß√£o rejected->approved', !canTransition('rejected', 'approved'), 'Transi√ß√£o bloqueada (correto)', 'WORKFLOW');
            
            // Teste 4: Validar motivos de rejei√ß√£o
            function validateRejectionReason(reason) {
                return reason && reason.trim().length > 0;
            }
            
            addTestResult('Motivo rejei√ß√£o v√°lido', validateRejectionReason('Documentos incompletos'), 'Motivo aceito', 'WORKFLOW');
            addTestResult('Motivo rejei√ß√£o vazio', !validateRejectionReason(''), 'Motivo vazio rejeitado', 'WORKFLOW');
            addTestResult('Motivo rejei√ß√£o null', !validateRejectionReason(null), 'Motivo null rejeitado', 'WORKFLOW');
            
            log('Testes de workflow conclu√≠dos!', 'success');
        }
        
        // =====================================================
        // GERA√á√ÉO DE DADOS DE TESTE
        // =====================================================
        
        function generateTestData() {
            const names = ['Jo√£o Silva Santos', 'Maria Oliveira Costa', 'Pedro Almeida Lima', 'Ana Carolina Souza', 'Carlos Eduardo Pereira'];
            const schools = ['Universidade de S√£o Paulo', 'Universidade Federal do Rio de Janeiro', 'Universidade Federal de Minas Gerais', 'Universidade Estadual de Campinas'];
            const states = ['SP', 'RJ', 'MG', 'RS', 'PR'];
            const specialties = [
                ['clinica-geral'],
                ['cardiologia', 'clinica-geral'],
                ['dermatologia'],
                ['pediatria', 'clinica-geral'],
                ['ginecologia']
            ];
            
            const randomName = names[Math.floor(Math.random() * names.length)];
            const randomSchool = schools[Math.floor(Math.random() * schools.length)];
            const randomState = states[Math.floor(Math.random() * states.length)];
            const randomSpecialties = specialties[Math.floor(Math.random() * specialties.length)];
            const randomCrm = Math.floor(Math.random() * 900000) + 100000; // 6 d√≠gitos
            const randomYear = Math.floor(Math.random() * 25) + 1999; // 1999-2024
            const randomPrice = Math.floor(Math.random() * 200) + 100; // 100-300
            const randomNum = Math.floor(Math.random() * 999) + 1;
            
            testData = {
                fullName: randomName,
                cpf: generateValidCPF(),
                rg: generateValidRG(),
                email: `medico${randomNum}@teste.com`,
                crm: randomCrm.toString(),
                crmState: randomState,
                medicalSchool: randomSchool,
                graduationYear: randomYear,
                price: randomPrice,
                specialties: randomSpecialties,
                phone: `(11) 9${Math.floor(Math.random() * 9000) + 1000}-${Math.floor(Math.random() * 9000) + 1000}`,
                address: `Rua Teste, ${Math.floor(Math.random() * 999) + 1}, S√£o Paulo - SP`
            };
            
            const infoDiv = document.getElementById('testDataInfo');
            infoDiv.innerHTML = `
                <div class="text-xs space-y-1">
                    <div><strong>Nome:</strong> ${testData.fullName}</div>
                    <div><strong>CPF:</strong> ${testData.cpf}</div>
                    <div><strong>RG:</strong> ${testData.rg}</div>
                    <div><strong>Email:</strong> ${testData.email}</div>
                    <div><strong>CRM:</strong> ${testData.crm}/${testData.crmState}</div>
                    <div><strong>Especialidades:</strong> ${testData.specialties.join(', ')}</div>
                </div>
            `;
            
            log(`Dados de teste gerados para: ${testData.fullName}`, 'success');
        }
        
        function generateValidCPF() {
            // Gera um CPF v√°lido (algoritmo simplificado para teste)
            const base = Math.floor(Math.random() * 900000000) + 100000000;
            return base.toString().replace(/(\d{3})(\d{3})(\d{3})/, '$1.$2.$3-00');
        }
        
        function generateValidRG() {
            // Gera um RG v√°lido para teste
            const base = Math.floor(Math.random() * 900000000) + 100000000;
            return base.toString().replace(/(\d{2})(\d{3})(\d{3})(\d{1})/, '$1.$2.$3-$4');
        }
        
        // =====================================================
        // TESTE MANUAL DE CANDIDATURA
        // =====================================================
        
        function fillTestDataInForm() {
            if (!testData) {
                generateTestData();
            }
            
            document.getElementById('testFullName').value = testData.fullName;
            document.getElementById('testCpf').value = testData.cpf;
            document.getElementById('testEmail').value = testData.email;
            document.getElementById('testCrm').value = testData.crm;
            document.getElementById('testCrmState').value = testData.crmState;
            document.getElementById('testMedicalSchool').value = testData.medicalSchool;
            document.getElementById('testGraduationYear').value = testData.graduationYear;
            document.getElementById('testPrice').value = testData.price;
            
            // Marcar especialidades
            const checkboxes = document.querySelectorAll('input[name="testSpecialties"]');
            checkboxes.forEach(cb => {
                cb.checked = testData.specialties.includes(cb.value);
            });
            
            addManualResult('Formul√°rio preenchido com dados de teste', 'success');
        }
        
        async function testManualApplication() {
            document.getElementById('manualTestResult').innerHTML = '';
            addManualResult('Iniciando teste de candidatura...', 'info');
            
            // Coletar dados do formul√°rio
            const formData = {
                fullName: document.getElementById('testFullName').value,
                cpf: document.getElementById('testCpf').value,
                email: document.getElementById('testEmail').value,
                crm: document.getElementById('testCrm').value,
                crmState: document.getElementById('testCrmState').value,
                medicalSchool: document.getElementById('testMedicalSchool').value,
                graduationYear: parseInt(document.getElementById('testGraduationYear').value),
                price: parseFloat(document.getElementById('testPrice').value),
                specialties: Array.from(document.querySelectorAll('input[name="testSpecialties"]:checked')).map(cb => cb.value)
            };
            
            // Validar dados
            addManualResult('Validando dados do formul√°rio...', 'info');
            
            let validationErrors = 0;
            
            if (!validateCPF(formData.cpf)) {
                addManualResult('‚ùå CPF inv√°lido', 'error');
                validationErrors++;
            } else {
                addManualResult('‚úÖ CPF v√°lido', 'success');
            }
            
            if (!validateEmail(formData.email)) {
                addManualResult('‚ùå Email inv√°lido', 'error');
                validationErrors++;
            } else {
                addManualResult('‚úÖ Email v√°lido', 'success');
            }
            
            if (!validateCRM(formData.crm)) {
                addManualResult('‚ùå CRM inv√°lido', 'error');
                validationErrors++;
            } else {
                addManualResult('‚úÖ CRM v√°lido', 'success');
            }
            
            if (!validateCRMState(formData.crmState)) {
                addManualResult('‚ùå Estado do CRM inv√°lido', 'error');
                validationErrors++;
            } else {
                addManualResult('‚úÖ Estado do CRM v√°lido', 'success');
            }
            
            if (!validateGraduationYear(formData.graduationYear)) {
                addManualResult('‚ùå Ano de forma√ß√£o inv√°lido', 'error');
                validationErrors++;
            } else {
                addManualResult('‚úÖ Ano de forma√ß√£o v√°lido', 'success');
            }
            
            if (!validateSpecialties(formData.specialties)) {
                addManualResult('‚ùå Nenhuma especialidade selecionada', 'error');
                validationErrors++;
            } else {
                addManualResult(`‚úÖ Especialidades v√°lidas: ${formData.specialties.join(', ')}`, 'success');
            }
            
            if (!validatePrice(formData.price)) {
                addManualResult('‚ùå Pre√ßo inv√°lido (deve ser entre R$ 50 e R$ 1000)', 'error');
                validationErrors++;
            } else {
                addManualResult(`‚úÖ Pre√ßo v√°lido: R$ ${formData.price}`, 'success');
            }
            
            if (validationErrors > 0) {
                addManualResult(`‚ùå Valida√ß√£o falhou: ${validationErrors} erro(s) encontrado(s)`, 'error');
                return;
            }
            
            addManualResult('‚úÖ Todos os dados s√£o v√°lidos!', 'success');
            
            // Simular envio para o banco
            addManualResult('Simulando envio para o banco de dados...', 'info');
            
            try {
                // Preparar dados para inser√ß√£o
                const applicationData = {
                    // Dados Pessoais Obrigat√≥rios
                    full_name: formData.fullName,
                    cpf: formData.cpf,
                    rg: generateValidRG(), // Campo obrigat√≥rio
                    birth_date: '1990-01-01', // Campo obrigat√≥rio
                    email: formData.email,
                    phone: '(11) 99999-9999',
                    address: 'Rua Teste, 123, S√£o Paulo - SP',
                    gender: 'masculino',
                    
                    // Registro Profissional
                    crm: formData.crm,
                    crm_state: formData.crmState,
                    crm_status: 'ativo',
                    
                    // Forma√ß√£o Acad√™mica
                    medical_school: formData.medicalSchool,
                    graduation_year: formData.graduationYear,
                    diploma_recognized: 'sim',
                    
                    // Especialidades
                    specialties: formData.specialties,
                    
                    // Experi√™ncia
                    experience_years: '3-5',
                    
                    // Dados Financeiros
                    bank: '001',
                    agency: '1234',
                    account: '12345-6',
                    pix_key: formData.email,
                    tax_status: 'pessoa-fisica',
                    
                    // Precifica√ß√£o
                    normal_consultation_price: formData.price,
                    
                    // Aspectos Legais (todos obrigat√≥rios)
                    cfm_resolution_accepted: true,
                    medical_ethics_accepted: true,
                    civil_responsibility_accepted: true,
                    service_contract_accepted: true,
                    privacy_policy_accepted: true,
                    platform_terms_accepted: true,
                    data_processing_authorized: true
                };
                
                const { data, error } = await supabase
                    .from('doctors_applications')
                    .insert(applicationData)
                    .select();
                
                if (error) {
                    if (error.code === '23505') {
                        addManualResult('‚ö†Ô∏è CPF ou email j√° cadastrado no sistema', 'warning');
                    } else {
                        addManualResult(`‚ùå Erro ao inserir: ${error.message}`, 'error');
                    }
                } else {
                    addManualResult(`‚úÖ Candidatura inserida com sucesso!`, 'success');
                    addManualResult(`üìã ID da candidatura: ${data[0].id}`, 'info');
                    addManualResult(`üìß Status: ${data[0].application_status}`, 'info');
                    addManualResult(`üìÖ Data de envio: ${new Date(data[0].submitted_at).toLocaleString('pt-BR')}`, 'info');
                }
                
            } catch (e) {
                addManualResult(`‚ùå Erro de conex√£o: ${e.message}`, 'error');
            }
        }
        
        // =====================================================
        // EVENT LISTENERS
        // =====================================================
        
        document.getElementById('runValidationTests').addEventListener('click', runValidationTests);
        document.getElementById('runDatabaseTests').addEventListener('click', runDatabaseTests);
        document.getElementById('runNotificationTests').addEventListener('click', runNotificationTests);
        document.getElementById('runAdminTests').addEventListener('click', runAdminTests);
        document.getElementById('runWorkflowTests').addEventListener('click', runWorkflowTests);
        
        document.getElementById('runAllTests').addEventListener('click', async () => {
            log('Executando todos os testes...', 'info');
            await runValidationTests();
            await runDatabaseTests();
            await runNotificationTests();
            await runAdminTests();
            await runWorkflowTests();
            log('Todos os testes conclu√≠dos!', 'success');
        });
        
        document.getElementById('generateTestData').addEventListener('click', generateTestData);
        document.getElementById('fillTestData').addEventListener('click', fillTestDataInForm);
        
        document.getElementById('testApplicationForm').addEventListener('submit', (e) => {
            e.preventDefault();
            testManualApplication();
        });
        
        document.getElementById('clearResults').addEventListener('click', () => {
            document.getElementById('testResults').innerHTML = '<div class="text-gray-500 text-center py-8">Resultados limpos</div>';
            document.getElementById('testProgress').innerHTML = '<div class="text-xs text-gray-600">Nenhum teste executado ainda</div>';
            testResults = [];
        });
        
        document.getElementById('clearConsole').addEventListener('click', () => {
            document.getElementById('debugConsole').innerHTML = '';
        });
        
        document.getElementById('exportResults').addEventListener('click', () => {
            const report = {
                timestamp: new Date().toISOString(),
                totalTests: testResults.length,
                passedTests: testResults.filter(r => r.passed).length,
                failedTests: testResults.filter(r => !r.passed).length,
                results: testResults
            };
            
            const blob = new Blob([JSON.stringify(report, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `teste-cadastro-medico-${new Date().toISOString().split('T')[0]}.json`;
            a.click();
            URL.revokeObjectURL(url);
            
            log('Relat√≥rio exportado com sucesso!', 'success');
        });
        
        // Inicializa√ß√£o
        log('Sistema de testes carregado e pronto!', 'success');
        log('Clique nos bot√µes para executar os testes da Tarefa 2', 'info');
    </script>
</body>
</html>