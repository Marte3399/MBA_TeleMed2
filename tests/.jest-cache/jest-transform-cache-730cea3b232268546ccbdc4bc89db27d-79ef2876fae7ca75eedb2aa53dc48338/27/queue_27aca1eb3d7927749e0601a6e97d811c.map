{"version":3,"names":["cov_15kdterhpp","actualCoverage","QueueSystem","constructor","f","s","currentQueueEntry","queueSubscription","notificationSubscription","jitsiConfig","appId","apiKey","init","createQueueInterface","console","log","queueHTML","document","body","insertAdjacentHTML","showQueueInterface","appointmentId","appointmentData","getAppointmentData","b","Error","queueData","getQueueData","updateQueueInterface","getElementById","classList","remove","style","overflow","startRealTimeUpdates","error","alert","data","supabase","from","select","eq","single","textContent","position","estimatedMinutes","estimated_wait_time","totalInQueue","progress","Math","max","width","round","specialties","name","Date","toLocaleDateString","duration","id","substring","updateQueueStatus","statusDiv","innerHTML","className","playNotificationSound","channel","on","event","schema","table","filter","payload","handleQueueUpdate","new","subscribe","handleNotification","newQueueData","oldPosition","newPosition","status","showCallModal","window","checkProximityNotifications","sendQueuePositionUpdateNotification","estimatedWaitTime","addNotification","notification","type","message","callModal","doctorName","specialty","playCallSound","sendConsultationReadyNotification","doctorData","joinVideoCall","roomName","appointment_id","jitsiOptions","height","parentNode","configOverwrite","startWithAudioMuted","startWithVideoMuted","enableWelcomePage","prejoinPageEnabled","disableModeratorIndicator","startScreenSharing","enableEmailInStats","interfaceConfigOverwrite","TOOLBAR_BUTTONS","SETTINGS_SECTIONS","SHOW_JITSI_WATERMARK","SHOW_WATERMARK_FOR_GUESTS","SHOW_BRAND_WATERMARK","BRAND_WATERMARK_LINK","SHOW_POWERED_BY","DEFAULT_BACKGROUND","DISABLE_VIDEO_BACKGROUND","INITIAL_TOOLBAR_TIMEOUT","TOOLBAR_TIMEOUT","TOOLBAR_ALWAYS_VISIBLE","DEFAULT_REMOTE_DISPLAY_NAME","DEFAULT_LOCAL_DISPLAY_NAME","userInfo","displayName","add","jitsiContainer","createElement","cssText","appendChild","api","JitsiMeetExternalAPI","jwt","generateJitsiJWT","addEventListener","updateAppointmentStatus","endConsultation","jitsiAPI","update","updated_at","toISOString","delete","showFeedbackModal","exitQueue","declineCall","testDevices","confirm","unsubscribe","notificationsContainer","icons","info","warning","success","colors","notificationHTML","toLocaleTimeString","emptyMessage","querySelector","notifications","children","length","audio","Audio","play","catch","loop","setTimeout","pause","currentTime","queueSystem","module","exports"],"sources":["queue.js"],"sourcesContent":["// Sistema de Fila de Consultas com Jitsi Meet\r\n// Gerencia fila em tempo real e integração com videochamadas\r\n\r\nclass QueueSystem {\r\n    constructor() {\r\n        this.currentQueueEntry = null;\r\n        this.queueSubscription = null;\r\n        this.notificationSubscription = null;\r\n        this.jitsiConfig = {\r\n            appId: 'vpaas-magic-cookie-d4eb95e56d4140978d223283225476be',\r\n            apiKey: 'vpaas-magic-cookie-d4eb95e56d4140978d223283225476be/feda42'\r\n        };\r\n        this.init();\r\n    }\r\n\r\n    init() {\r\n        this.createQueueInterface();\r\n        console.log('⏳ Sistema de Fila inicializado');\r\n    }\r\n\r\n    // Criar interface da fila\r\n    createQueueInterface() {\r\n        const queueHTML = `\r\n            <div id=\"queueInterface\" class=\"fixed inset-0 bg-gray-50 hidden z-40\">\r\n                <!-- Header -->\r\n                <div class=\"bg-white shadow-sm border-b\">\r\n                    <div class=\"max-w-4xl mx-auto px-4 py-4\">\r\n                        <div class=\"flex items-center justify-between\">\r\n                            <div class=\"flex items-center\">\r\n                                <div class=\"text-2xl mr-3\">⏳</div>\r\n                                <div>\r\n                                    <h1 class=\"text-xl font-bold text-gray-900\">Fila de Atendimento</h1>\r\n                                    <p class=\"text-sm text-gray-600\">Aguarde sua vez para a consulta</p>\r\n                                </div>\r\n                            </div>\r\n                            <button onclick=\"queueSystem.exitQueue()\" \r\n                                    class=\"text-red-600 hover:text-red-700 font-medium\">\r\n                                Sair da Fila\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <!-- Conteúdo Principal -->\r\n                <div class=\"max-w-4xl mx-auto px-4 py-8\">\r\n                    <div class=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\r\n                        \r\n                        <!-- Status da Fila -->\r\n                        <div class=\"lg:col-span-2\">\r\n                            <div class=\"bg-white rounded-xl shadow-lg p-6 mb-6\">\r\n                                <h2 class=\"text-lg font-bold text-gray-900 mb-4\">Sua Posição na Fila</h2>\r\n                                \r\n                                <!-- Posição Atual -->\r\n                                <div class=\"text-center mb-6\">\r\n                                    <div id=\"queuePosition\" class=\"text-6xl font-bold text-blue-600 mb-2\">-</div>\r\n                                    <p class=\"text-gray-600\">Posição na fila</p>\r\n                                </div>\r\n\r\n                                <!-- Tempo Estimado -->\r\n                                <div class=\"bg-blue-50 rounded-lg p-4 mb-6\">\r\n                                    <div class=\"flex items-center justify-between\">\r\n                                        <span class=\"font-medium text-blue-900\">Tempo estimado:</span>\r\n                                        <span id=\"estimatedTime\" class=\"text-xl font-bold text-blue-600\">-- min</span>\r\n                                    </div>\r\n                                </div>\r\n\r\n                                <!-- Progresso Visual -->\r\n                                <div class=\"mb-6\">\r\n                                    <div class=\"flex justify-between text-sm text-gray-600 mb-2\">\r\n                                        <span>Progresso</span>\r\n                                        <span id=\"progressText\">0%</span>\r\n                                    </div>\r\n                                    <div class=\"w-full bg-gray-200 rounded-full h-3\">\r\n                                        <div id=\"progressBar\" class=\"bg-blue-600 h-3 rounded-full transition-all duration-500\" style=\"width: 0%\"></div>\r\n                                    </div>\r\n                                </div>\r\n\r\n                                <!-- Status -->\r\n                                <div id=\"queueStatus\" class=\"text-center p-4 rounded-lg bg-yellow-50 border border-yellow-200\">\r\n                                    <div class=\"text-yellow-600 font-medium\">⏳ Aguardando na fila...</div>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <!-- Detalhes da Consulta -->\r\n                            <div class=\"bg-white rounded-xl shadow-lg p-6\">\r\n                                <h3 class=\"text-lg font-bold text-gray-900 mb-4\">Detalhes da Consulta</h3>\r\n                                <div class=\"space-y-3\">\r\n                                    <div class=\"flex justify-between\">\r\n                                        <span class=\"text-gray-600\">Especialidade:</span>\r\n                                        <span id=\"consultationSpecialty\" class=\"font-medium\">-</span>\r\n                                    </div>\r\n                                    <div class=\"flex justify-between\">\r\n                                        <span class=\"text-gray-600\">Data:</span>\r\n                                        <span id=\"consultationDate\" class=\"font-medium\">-</span>\r\n                                    </div>\r\n                                    <div class=\"flex justify-between\">\r\n                                        <span class=\"text-gray-600\">Duração:</span>\r\n                                        <span id=\"consultationDuration\" class=\"font-medium\">-</span>\r\n                                    </div>\r\n                                    <div class=\"flex justify-between\">\r\n                                        <span class=\"text-gray-600\">ID da Consulta:</span>\r\n                                        <span id=\"consultationId\" class=\"font-medium text-sm\">-</span>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <!-- Painel Lateral -->\r\n                        <div class=\"space-y-6\">\r\n                            \r\n                            <!-- Notificações -->\r\n                            <div class=\"bg-white rounded-xl shadow-lg p-6\">\r\n                                <h3 class=\"text-lg font-bold text-gray-900 mb-4\">Notificações</h3>\r\n                                <div id=\"queueNotifications\" class=\"space-y-3\">\r\n                                    <div class=\"text-gray-500 text-center py-4\">\r\n                                        Nenhuma notificação ainda\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <!-- Preparação para Consulta -->\r\n                            <div class=\"bg-white rounded-xl shadow-lg p-6\">\r\n                                <h3 class=\"text-lg font-bold text-gray-900 mb-4\">Preparação</h3>\r\n                                <div class=\"space-y-3 text-sm\">\r\n                                    <div class=\"flex items-center\">\r\n                                        <div class=\"text-green-500 mr-2\">✓</div>\r\n                                        <span>Teste sua câmera e microfone</span>\r\n                                    </div>\r\n                                    <div class=\"flex items-center\">\r\n                                        <div class=\"text-green-500 mr-2\">✓</div>\r\n                                        <span>Tenha seus documentos em mãos</span>\r\n                                    </div>\r\n                                    <div class=\"flex items-center\">\r\n                                        <div class=\"text-green-500 mr-2\">✓</div>\r\n                                        <span>Encontre um local silencioso</span>\r\n                                    </div>\r\n                                </div>\r\n                                \r\n                                <button onclick=\"queueSystem.testDevices()\" \r\n                                        class=\"w-full mt-4 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\">\r\n                                    Testar Câmera/Microfone\r\n                                </button>\r\n                            </div>\r\n\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <!-- Modal de Chamada -->\r\n                <div id=\"callModal\" class=\"fixed inset-0 bg-black bg-opacity-75 hidden z-50 flex items-center justify-center\">\r\n                    <div class=\"bg-white rounded-xl p-8 max-w-md w-full mx-4 text-center\">\r\n                        <div class=\"text-6xl mb-4 animate-pulse\">📞</div>\r\n                        <h2 class=\"text-2xl font-bold text-green-600 mb-4\">Sua Consulta Está Pronta!</h2>\r\n                        <p class=\"text-gray-600 mb-6\">O médico está aguardando você na sala de consulta.</p>\r\n                        \r\n                        <div class=\"bg-green-50 border border-green-200 rounded-lg p-4 mb-6\">\r\n                            <p class=\"text-sm text-green-800\">\r\n                                <strong>Médico:</strong> <span id=\"doctorName\">Dr. João Silva</span><br>\r\n                                <strong>Especialidade:</strong> <span id=\"doctorSpecialty\">Cardiologia</span>\r\n                            </p>\r\n                        </div>\r\n\r\n                        <div class=\"flex space-x-4\">\r\n                            <button onclick=\"queueSystem.declineCall()\" \r\n                                    class=\"flex-1 px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors\">\r\n                                Não Posso Agora\r\n                            </button>\r\n                            <button onclick=\"queueSystem.joinVideoCall()\" \r\n                                    class=\"flex-1 px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors font-medium\">\r\n                                Entrar na Consulta\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        `;\r\n\r\n        document.body.insertAdjacentHTML('beforeend', queueHTML);\r\n    }\r\n\r\n    // Mostrar interface da fila\r\n    async showQueueInterface(appointmentId) {\r\n        try {\r\n            // Buscar dados da consulta\r\n            const appointmentData = await this.getAppointmentData(appointmentId);\r\n            if (!appointmentData) {\r\n                throw new Error('Consulta não encontrada');\r\n            }\r\n\r\n            // Buscar posição na fila\r\n            const queueData = await this.getQueueData(appointmentId);\r\n            if (!queueData) {\r\n                throw new Error('Posição na fila não encontrada');\r\n            }\r\n\r\n            this.currentQueueEntry = queueData;\r\n\r\n            // Preencher dados na interface\r\n            this.updateQueueInterface(appointmentData, queueData);\r\n\r\n            // Mostrar interface\r\n            document.getElementById('queueInterface').classList.remove('hidden');\r\n            document.body.style.overflow = 'hidden';\r\n\r\n            // Iniciar monitoramento em tempo real\r\n            this.startRealTimeUpdates();\r\n\r\n            console.log('✅ Interface da fila exibida');\r\n\r\n        } catch (error) {\r\n            console.error('❌ Erro ao mostrar fila:', error);\r\n            alert('Erro ao carregar fila de espera. Tente novamente.');\r\n        }\r\n    }\r\n\r\n    // Buscar dados da consulta\r\n    async getAppointmentData(appointmentId) {\r\n        try {\r\n            const { data, error } = await supabase\r\n                .from('appointments')\r\n                .select(`\r\n                    *,\r\n                    specialties (name, duration)\r\n                `)\r\n                .eq('id', appointmentId)\r\n                .single();\r\n\r\n            if (error) throw error;\r\n            return data;\r\n\r\n        } catch (error) {\r\n            console.error('❌ Erro ao buscar consulta:', error);\r\n            return null;\r\n        }\r\n    }\r\n\r\n    // Buscar dados da fila\r\n    async getQueueData(appointmentId) {\r\n        try {\r\n            const { data, error } = await supabase\r\n                .from('consultation_queue')\r\n                .select('*')\r\n                .eq('appointment_id', appointmentId)\r\n                .single();\r\n\r\n            if (error) throw error;\r\n            return data;\r\n\r\n        } catch (error) {\r\n            console.error('❌ Erro ao buscar fila:', error);\r\n            return null;\r\n        }\r\n    }\r\n\r\n    // Atualizar interface da fila\r\n    updateQueueInterface(appointmentData, queueData) {\r\n        // Atualizar posição\r\n        document.getElementById('queuePosition').textContent = queueData.position;\r\n        \r\n        // Atualizar tempo estimado\r\n        const estimatedMinutes = queueData.estimated_wait_time || (queueData.position * 15);\r\n        document.getElementById('estimatedTime').textContent = `${estimatedMinutes} min`;\r\n\r\n        // Atualizar progresso (simulado)\r\n        const totalInQueue = queueData.position + 5; // Estimativa\r\n        const progress = Math.max(0, ((totalInQueue - queueData.position) / totalInQueue) * 100);\r\n        document.getElementById('progressBar').style.width = `${progress}%`;\r\n        document.getElementById('progressText').textContent = `${Math.round(progress)}%`;\r\n\r\n        // Atualizar detalhes da consulta\r\n        document.getElementById('consultationSpecialty').textContent = appointmentData.specialties?.name || 'N/A';\r\n        document.getElementById('consultationDate').textContent = new Date().toLocaleDateString('pt-BR');\r\n        document.getElementById('consultationDuration').textContent = `${appointmentData.specialties?.duration || 30} min`;\r\n        document.getElementById('consultationId').textContent = appointmentData.id.substring(0, 8) + '...';\r\n\r\n        // Atualizar status baseado na posição\r\n        this.updateQueueStatus(queueData.position);\r\n    }\r\n\r\n    // Atualizar status da fila\r\n    updateQueueStatus(position) {\r\n        const statusDiv = document.getElementById('queueStatus');\r\n        \r\n        if (position === 1) {\r\n            statusDiv.innerHTML = '<div class=\"text-green-600 font-medium\">🟢 Você é o próximo! Mantenha-se pronto</div>';\r\n            statusDiv.className = 'text-center p-4 rounded-lg bg-green-50 border border-green-200';\r\n            this.playNotificationSound();\r\n        } else if (position <= 3) {\r\n            statusDiv.innerHTML = '<div class=\"text-orange-600 font-medium\">🟡 Quase sua vez! Prepare-se</div>';\r\n            statusDiv.className = 'text-center p-4 rounded-lg bg-orange-50 border border-orange-200';\r\n        } else {\r\n            statusDiv.innerHTML = '<div class=\"text-yellow-600 font-medium\">⏳ Aguardando na fila...</div>';\r\n            statusDiv.className = 'text-center p-4 rounded-lg bg-yellow-50 border border-yellow-200';\r\n        }\r\n    }\r\n\r\n    // Iniciar atualizações em tempo real\r\n    startRealTimeUpdates() {\r\n        if (!this.currentQueueEntry) return;\r\n\r\n        // Subscription para mudanças na fila\r\n        this.queueSubscription = supabase\r\n            .channel('queue-updates')\r\n            .on('postgres_changes', {\r\n                event: 'UPDATE',\r\n                schema: 'public',\r\n                table: 'consultation_queue',\r\n                filter: `id=eq.${this.currentQueueEntry.id}`\r\n            }, (payload) => {\r\n                console.log('🔄 Atualização da fila:', payload);\r\n                this.handleQueueUpdate(payload.new);\r\n            })\r\n            .subscribe();\r\n\r\n        // Subscription para notificações\r\n        this.notificationSubscription = supabase\r\n            .channel('user-notifications')\r\n            .on('postgres_changes', {\r\n                event: 'INSERT',\r\n                schema: 'public',\r\n                table: 'notifications'\r\n            }, (payload) => {\r\n                this.handleNotification(payload.new);\r\n            })\r\n            .subscribe();\r\n\r\n        console.log('🔄 Monitoramento em tempo real iniciado');\r\n    }\r\n\r\n    // Lidar com atualizações da fila\r\n    handleQueueUpdate(newQueueData) {\r\n        const oldPosition = this.currentQueueEntry.position;\r\n        const newPosition = newQueueData.position;\r\n\r\n        this.currentQueueEntry = newQueueData;\r\n\r\n        // Atualizar interface\r\n        this.updateQueueInterface({ specialties: { name: 'Cardiologia', duration: 30 } }, newQueueData);\r\n\r\n        // Verificar se é a vez do usuário\r\n        if (newPosition === 0 || newQueueData.status === 'ready') {\r\n            this.showCallModal();\r\n        }\r\n\r\n        // Usar sistema de notificações multi-canal\r\n        if (oldPosition !== newPosition) {\r\n            // Verificar notificações de proximidade\r\n            if (typeof window.checkProximityNotifications === 'function') {\r\n                window.checkProximityNotifications(newPosition);\r\n            }\r\n            \r\n            // Enviar notificação de atualização de posição\r\n            if (typeof window.sendQueuePositionUpdateNotification === 'function') {\r\n                const estimatedWaitTime = newQueueData.estimated_wait_time || (newPosition * 15);\r\n                window.sendQueuePositionUpdateNotification(newPosition, estimatedWaitTime);\r\n            }\r\n            \r\n            this.addNotification(`Sua posição mudou para ${newPosition}`, 'info');\r\n        }\r\n    }\r\n\r\n    // Lidar com notificações\r\n    handleNotification(notification) {\r\n        if (notification.type === 'consultation_ready') {\r\n            this.showCallModal(notification);\r\n        } else {\r\n            this.addNotification(notification.message, notification.type);\r\n        }\r\n    }\r\n\r\n    // Mostrar modal de chamada\r\n    showCallModal(notification = null) {\r\n        const callModal = document.getElementById('callModal');\r\n        \r\n        // Preencher dados do médico (simulado ou da notificação)\r\n        if (notification && notification.data) {\r\n            document.getElementById('doctorName').textContent = notification.data.doctorName || 'Dr. João Silva';\r\n            document.getElementById('doctorSpecialty').textContent = notification.data.specialty || 'Cardiologia';\r\n        }\r\n\r\n        callModal.classList.remove('hidden');\r\n        \r\n        // Usar sistema de notificações multi-canal para som de chamada\r\n        if (typeof window.playCallSound === 'function') {\r\n            window.playCallSound();\r\n        } else {\r\n            this.playCallSound();\r\n        }\r\n\r\n        // Enviar notificação de consulta pronta\r\n        if (typeof window.sendConsultationReadyNotification === 'function') {\r\n            const doctorData = {\r\n                name: document.getElementById('doctorName').textContent,\r\n                specialty: document.getElementById('doctorSpecialty').textContent\r\n            };\r\n            window.sendConsultationReadyNotification(doctorData);\r\n        }\r\n\r\n        console.log('📞 Modal de chamada exibido');\r\n    }\r\n\r\n    // Entrar na videochamada\r\n    async joinVideoCall() {\r\n        try {\r\n            console.log('📹 Iniciando videochamada...');\r\n\r\n            // Gerar sala única para a consulta\r\n            const roomName = `consultation-${this.currentQueueEntry.appointment_id}`;\r\n            \r\n            // Configurar Jitsi Meet\r\n            const jitsiOptions = {\r\n                roomName: roomName,\r\n                width: '100%',\r\n                height: '100%',\r\n                parentNode: document.body,\r\n                configOverwrite: {\r\n                    startWithAudioMuted: false,\r\n                    startWithVideoMuted: false,\r\n                    enableWelcomePage: false,\r\n                    prejoinPageEnabled: false,\r\n                    disableModeratorIndicator: true,\r\n                    startScreenSharing: false,\r\n                    enableEmailInStats: false\r\n                },\r\n                interfaceConfigOverwrite: {\r\n                    TOOLBAR_BUTTONS: [\r\n                        'microphone', 'camera', 'closedcaptions', 'desktop', 'fullscreen',\r\n                        'fodeviceselection', 'hangup', 'profile', 'chat', 'recording',\r\n                        'livestreaming', 'etherpad', 'sharedvideo', 'settings', 'raisehand',\r\n                        'videoquality', 'filmstrip', 'invite', 'feedback', 'stats', 'shortcuts',\r\n                        'tileview', 'videobackgroundblur', 'download', 'help', 'mute-everyone'\r\n                    ],\r\n                    SETTINGS_SECTIONS: ['devices', 'language', 'moderator', 'profile', 'calendar'],\r\n                    SHOW_JITSI_WATERMARK: false,\r\n                    SHOW_WATERMARK_FOR_GUESTS: false,\r\n                    SHOW_BRAND_WATERMARK: false,\r\n                    BRAND_WATERMARK_LINK: '',\r\n                    SHOW_POWERED_BY: false,\r\n                    DEFAULT_BACKGROUND: '#474747',\r\n                    DISABLE_VIDEO_BACKGROUND: false,\r\n                    INITIAL_TOOLBAR_TIMEOUT: 20000,\r\n                    TOOLBAR_TIMEOUT: 4000,\r\n                    TOOLBAR_ALWAYS_VISIBLE: false,\r\n                    DEFAULT_REMOTE_DISPLAY_NAME: 'Médico',\r\n                    DEFAULT_LOCAL_DISPLAY_NAME: 'Paciente'\r\n                },\r\n                userInfo: {\r\n                    displayName: 'Paciente'\r\n                }\r\n            };\r\n\r\n            // Fechar modal de chamada\r\n            document.getElementById('callModal').classList.add('hidden');\r\n\r\n            // Criar container para Jitsi\r\n            const jitsiContainer = document.createElement('div');\r\n            jitsiContainer.id = 'jitsi-container';\r\n            jitsiContainer.style.cssText = 'position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 9999; background: #000;';\r\n            document.body.appendChild(jitsiContainer);\r\n\r\n            // Inicializar Jitsi Meet\r\n            const api = new JitsiMeetExternalAPI('8x8.vc', {\r\n                ...jitsiOptions,\r\n                parentNode: jitsiContainer,\r\n                jwt: await this.generateJitsiJWT(roomName)\r\n            });\r\n\r\n            // Event listeners\r\n            api.addEventListener('videoConferenceJoined', () => {\r\n                console.log('✅ Entrou na videochamada');\r\n                this.updateAppointmentStatus('in_progress');\r\n            });\r\n\r\n            api.addEventListener('videoConferenceLeft', () => {\r\n                console.log('👋 Saiu da videochamada');\r\n                this.endConsultation();\r\n                jitsiContainer.remove();\r\n            });\r\n\r\n            // Salvar referência da API\r\n            this.jitsiAPI = api;\r\n\r\n        } catch (error) {\r\n            console.error('❌ Erro ao iniciar videochamada:', error);\r\n            alert('Erro ao iniciar videochamada. Tente novamente.');\r\n        }\r\n    }\r\n\r\n    // Gerar JWT para Jitsi (simulado)\r\n    async generateJitsiJWT(roomName) {\r\n        // Em produção, isso seria feito no backend\r\n        // Por enquanto, retornamos null (modo público)\r\n        return null;\r\n    }\r\n\r\n    // Atualizar status da consulta\r\n    async updateAppointmentStatus(status) {\r\n        try {\r\n            const { error } = await supabase\r\n                .from('appointments')\r\n                .update({ status: status, updated_at: new Date().toISOString() })\r\n                .eq('id', this.currentQueueEntry.appointment_id);\r\n\r\n            if (error) throw error;\r\n            console.log('✅ Status da consulta atualizado:', status);\r\n\r\n        } catch (error) {\r\n            console.error('❌ Erro ao atualizar status:', error);\r\n        }\r\n    }\r\n\r\n    // Finalizar consulta\r\n    async endConsultation() {\r\n        try {\r\n            // Atualizar status\r\n            await this.updateAppointmentStatus('completed');\r\n\r\n            // Remover da fila\r\n            await supabase\r\n                .from('consultation_queue')\r\n                .delete()\r\n                .eq('id', this.currentQueueEntry.id);\r\n\r\n            // Mostrar feedback\r\n            this.showFeedbackModal();\r\n\r\n            console.log('✅ Consulta finalizada');\r\n\r\n        } catch (error) {\r\n            console.error('❌ Erro ao finalizar consulta:', error);\r\n        }\r\n    }\r\n\r\n    // Mostrar modal de feedback\r\n    showFeedbackModal() {\r\n        // Implementar modal de avaliação\r\n        alert('Consulta finalizada! Por favor, avalie sua experiência.');\r\n        this.exitQueue();\r\n    }\r\n\r\n    // Recusar chamada\r\n    declineCall() {\r\n        document.getElementById('callModal').classList.add('hidden');\r\n        // Reposicionar na fila ou reagendar\r\n        this.addNotification('Chamada recusada. Você foi reposicionado na fila.', 'warning');\r\n    }\r\n\r\n    // Testar dispositivos\r\n    testDevices() {\r\n        // Implementar teste de câmera e microfone\r\n        alert('Teste de dispositivos em desenvolvimento...');\r\n    }\r\n\r\n    // Sair da fila\r\n    async exitQueue() {\r\n        if (confirm('Tem certeza que deseja sair da fila? Você perderá sua posição.')) {\r\n            try {\r\n                // Remover da fila\r\n                if (this.currentQueueEntry) {\r\n                    await supabase\r\n                        .from('consultation_queue')\r\n                        .delete()\r\n                        .eq('id', this.currentQueueEntry.id);\r\n                }\r\n\r\n                // Parar subscriptions\r\n                if (this.queueSubscription) {\r\n                    this.queueSubscription.unsubscribe();\r\n                }\r\n                if (this.notificationSubscription) {\r\n                    this.notificationSubscription.unsubscribe();\r\n                }\r\n\r\n                // Esconder interface\r\n                document.getElementById('queueInterface').classList.add('hidden');\r\n                document.body.style.overflow = 'auto';\r\n\r\n                console.log('👋 Saiu da fila');\r\n\r\n            } catch (error) {\r\n                console.error('❌ Erro ao sair da fila:', error);\r\n            }\r\n        }\r\n    }\r\n\r\n    // Adicionar notificação\r\n    addNotification(message, type = 'info') {\r\n        const notificationsContainer = document.getElementById('queueNotifications');\r\n        \r\n        const icons = {\r\n            info: 'ℹ️',\r\n            warning: '⚠️',\r\n            success: '✅',\r\n            error: '❌'\r\n        };\r\n\r\n        const colors = {\r\n            info: 'bg-blue-50 border-blue-200 text-blue-800',\r\n            warning: 'bg-yellow-50 border-yellow-200 text-yellow-800',\r\n            success: 'bg-green-50 border-green-200 text-green-800',\r\n            error: 'bg-red-50 border-red-200 text-red-800'\r\n        };\r\n\r\n        const notificationHTML = `\r\n            <div class=\"p-3 rounded-lg border ${colors[type]} text-sm\">\r\n                <div class=\"flex items-start\">\r\n                    <span class=\"mr-2\">${icons[type]}</span>\r\n                    <div>\r\n                        <p>${message}</p>\r\n                        <p class=\"text-xs opacity-75 mt-1\">${new Date().toLocaleTimeString('pt-BR')}</p>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        `;\r\n\r\n        // Remover mensagem vazia se existir\r\n        const emptyMessage = notificationsContainer.querySelector('.text-gray-500');\r\n        if (emptyMessage) {\r\n            emptyMessage.remove();\r\n        }\r\n\r\n        notificationsContainer.insertAdjacentHTML('afterbegin', notificationHTML);\r\n\r\n        // Limitar a 5 notificações\r\n        const notifications = notificationsContainer.children;\r\n        if (notifications.length > 5) {\r\n            notifications[notifications.length - 1].remove();\r\n        }\r\n    }\r\n\r\n    // Tocar som de notificação\r\n    playNotificationSound() {\r\n        try {\r\n            const audio = new Audio('data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiTYIG2m98OScTgwOUarm7blmGgU7k9n1unEiBC13yO/eizEIHWq+8+OWT');\r\n            audio.play().catch(() => {}); // Ignorar erros de autoplay\r\n        } catch (error) {\r\n            console.log('🔇 Som de notificação não disponível');\r\n        }\r\n    }\r\n\r\n    // Tocar som de chamada\r\n    playCallSound() {\r\n        try {\r\n            const audio = new Audio('data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiTYIG2m98OScTgwOUarm7blmGgU7k9n1unEiBC13yO/eizEIHWq+8+OWT');\r\n            audio.loop = true;\r\n            audio.play().catch(() => {});\r\n            \r\n            // Parar após 10 segundos\r\n            setTimeout(() => {\r\n                audio.pause();\r\n                audio.currentTime = 0;\r\n            }, 10000);\r\n        } catch (error) {\r\n            console.log('🔇 Som de chamada não disponível');\r\n        }\r\n    }\r\n}\r\n\r\n// Inicializar sistema quando a página carregar\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n    window.queueSystem = new QueueSystem();\r\n});\r\n\r\n// Exportar para uso em outros módulos\r\nif (typeof module !== 'undefined' && module.exports) {\r\n    module.exports = QueueSystem;\r\n}"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAeY;IAAAA,cAAA,YAAAA,CAAA;MAAA,OAAAC,cAAA;IAAA;EAAA;EAAA,OAAAA,cAAA;AAAA;AAAAD,cAAA;AAfZ;AACA;;AAEA,MAAME,WAAW,CAAC;EACdC,WAAWA,CAAA,EAAG;IAAA;IAAAH,cAAA,GAAAI,CAAA;IAAAJ,cAAA,GAAAK,CAAA;IACV,IAAI,CAACC,iBAAiB,GAAG,IAAI;IAAC;IAAAN,cAAA,GAAAK,CAAA;IAC9B,IAAI,CAACE,iBAAiB,GAAG,IAAI;IAAC;IAAAP,cAAA,GAAAK,CAAA;IAC9B,IAAI,CAACG,wBAAwB,GAAG,IAAI;IAAC;IAAAR,cAAA,GAAAK,CAAA;IACrC,IAAI,CAACI,WAAW,GAAG;MACfC,KAAK,EAAE,qDAAqD;MAC5DC,MAAM,EAAE;IACZ,CAAC;IAAC;IAAAX,cAAA,GAAAK,CAAA;IACF,IAAI,CAACO,IAAI,CAAC,CAAC;EACf;EAEAA,IAAIA,CAAA,EAAG;IAAA;IAAAZ,cAAA,GAAAI,CAAA;IAAAJ,cAAA,GAAAK,CAAA;IACH,IAAI,CAACQ,oBAAoB,CAAC,CAAC;IAAC;IAAAb,cAAA,GAAAK,CAAA;IAC5BS,OAAO,CAACC,GAAG,CAAC,gCAAgC,CAAC;EACjD;;EAEA;EACAF,oBAAoBA,CAAA,EAAG;IAAA;IAAAb,cAAA,GAAAI,CAAA;IACnB,MAAMY,SAAS;IAAA;IAAA,CAAAhB,cAAA,GAAAK,CAAA,OAAG;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;IAAC;IAAAL,cAAA,GAAAK,CAAA;IAEFY,QAAQ,CAACC,IAAI,CAACC,kBAAkB,CAAC,WAAW,EAAEH,SAAS,CAAC;EAC5D;;EAEA;EACA,MAAMI,kBAAkBA,CAACC,aAAa,EAAE;IAAA;IAAArB,cAAA,GAAAI,CAAA;IAAAJ,cAAA,GAAAK,CAAA;IACpC,IAAI;MACA;MACA,MAAMiB,eAAe;MAAA;MAAA,CAAAtB,cAAA,GAAAK,CAAA,QAAG,MAAM,IAAI,CAACkB,kBAAkB,CAACF,aAAa,CAAC;MAAC;MAAArB,cAAA,GAAAK,CAAA;MACrE,IAAI,CAACiB,eAAe,EAAE;QAAA;QAAAtB,cAAA,GAAAwB,CAAA;QAAAxB,cAAA,GAAAK,CAAA;QAClB,MAAM,IAAIoB,KAAK,CAAC,yBAAyB,CAAC;MAC9C,CAAC;MAAA;MAAA;QAAAzB,cAAA,GAAAwB,CAAA;MAAA;;MAED;MACA,MAAME,SAAS;MAAA;MAAA,CAAA1B,cAAA,GAAAK,CAAA,QAAG,MAAM,IAAI,CAACsB,YAAY,CAACN,aAA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","ignoreList":[]}